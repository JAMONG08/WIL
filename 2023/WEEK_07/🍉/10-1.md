# 10-1 프로세스

### 프로세스 ?

보조기억 장치에 저장된 프로그램을 메모리에 적재하고 실행하면 프로그램 →프로세스가 됨

### 확인방법

```jsx
ps -ef : 현재 실행중인모든 프로세스
-e : 간단한 출력 
-p : PID 출력
-l : 자세한 정보

ps -ef | grep '프로세스명'
```

- **포그라운드 프로세스**: 사용자가 볼 수 있는 공간(보는 앞에서 실행)에서 실행되는 프로세스
- **백그라운드 프로세스**: 사용자가 보지 못하는 뒤편에서 실행되는 프로세스
- **데몬(서비스)**: 사용자와 상호작용하지 않고 정해진 일만 수행하는 백그라운드 프로세스
- ps ef
    - UID: 프로세스를 실행한 사용자의 ID
    - PID: 프로세스의 ID (Process ID)
    - PPID: 부모 프로세스의 ID (Parent Process ID)
    - C: CPU 사용량
    - STIME: 프로세스가 시작된 시간
    - TTY: 프로세스가 실행 중인 터미널
    - TIME: 프로세스가 사용한 CPU 시간
    - CMD: 실행된 명령어

### 프로세스 제어 블록 (PCB)

- 차례대로 돌아가며 한정된 시간만큼만 CPU를 이용할 수 있도록
- 빠르게 번갈아 수행되는 프로세스의 실행 순서를 관리
- 프로세스와 관련된 정보를 저장하는 자료구조
- PCB는 커널 영역에 생성된다. 운영체제는 수많은 프로세스들 사이에서 PCB로 특정 프로세스를 식별하고 해당 프로세스를 처리하는 데 필요한 정보를 판단한다. PCB는 프로세스 생성 시에 만들어지고 실행이 끝나면 폐기된다.

**PCB의 정보**

- 프로세스 ID(PID) : 운영체제가 프로세스를 구별하기 위해 할당하는 고유한 식별자
- 레지스터 값 :  자신의 실행 차례가 돌아오면 이전까지 사용했던 레지스터의 중간값들을 모두 복원한다. => 이전까지의 진행 작업 이어 실행 가능
- 프로세스 상태 : 현재 프로세스가 어떤 상태인지 PCB에 기록 (입출력 대기, CPU 사용 대기, CPU 이용 등)
- CPU 스케줄링 정보 : 프로세스가 언제, 어떤 순서로 CPU를 할당받을지에 대한 정보
- 메모리 관리 정보 : 프로세스마다 메모리에 저장된 위치가 다르다. 프로세스가 어느 주소에 저장되어 있는지에 대한 정보가 있어야 한다.
- 입출력 상태 정보(I/O Status Information) : 어떤 입출력 작업을 수행, 사용중인지 정보 저장

### 문맥 교환 (Context Switching)

- CPU가 하나의 프로세스에서 다른 프로세스로 전환될 때 발생하는 과정
- 발생상황
    1. 다른 프로세스로 CPU가 할당될 때
    2. 인터럽트가 발생하여 운영체제가 처리해야 할 때
    3. 현재 실행중인 프로세스가 I/O 요청을 보내어 입출력 작업을 수행할 때
- 문맥교환이 자주 일어나면 프로세스는 그만큼 빨리 번갈아가며 수행 된다. => 동시에 실행되는 것처럼 보인다.
- 빈번한 경우 시스템 성능에 부정적인 영향을 미침 ⇒ 최소화되도록 관리

### 메모리영역

![FdJ8Xbd.png](10-1/FdJ8Xbd.png)

- 정적영역s
    - 코드 영역과 데이터 영역은 그 크기가 변하지 않는다
    - 코드영역
        - 텍스트 영역 =  **기계어로 이루어진 명령어 = 실행할 명령어**
        - 읽기 전용 공간
    - 데이터 영역
        - 프로그램이 실행될 동안 유지할 데이터가 저장되는 공간
        - 전역변수
- 동적영역
    - 힙과 스택 영역은 실시간으로 크기가 변할 수 있기 때문에 동적 할당 영역이라고 한다.
    - 힙영역
        - 프로그램을 만드는 사용자 (프로그래머)가 **직접 할당할 수 있는 저장 공간**이다.
        - 메모리 할당 시 언젠가는 반환해야 한다. (더이상 해당 메모리 공간 사용하지 않겠다.)
        - 메모리 공간 반환 x => 메모리 낭비 (**메모리 누수**)
        - 낮은 주소에서 높은 주소로 할당
    - 스택 영역
        - 일시적 저장 데이터 PUSH, 필요하지 않은 데이터 POP
        - 지역변수, 매개변수, 복귀 주소
        - 함수가 호출될 때마다 스택에 새로운 프레임 추가
        - 높은 주소에서 낮은 주소로 할당